---
description: App 版本管理與更新規則
alwaysApply: true
---

# App 版本管理（強制）

## 版本信息記錄要求

### 必須記錄的版本信息
當開始分析新的 App 版本或 App 更新改版時，必須更新以下信息：

1. **App 名稱 (App Name)**：應用顯示名稱（如 `DBS Digibank`）
2. **包名 (Package Name)**：完整包名（如 `com.dbs.sg.dbsmbanking`）
3. **App 版本號 (App Version)**：完整版本號（如 `25.8.3`）
4. **啟動 Activity (Launch Activity)**：主啟動 Activity（如 `com.dbs.sg.digibank.ui.demo.SplashActivity`）
5. **分析日期**：開始分析的日期
6. **版本變更說明**：與上一版本的差異（如適用）

### 版本信息存放位置

#### 主要版本信息文件
- **`config/VERSION_INFO.md`**：當前分析的 App 版本信息（必須保持最新）
- **模板文件**：`.cursor/rules/VERSION_INFO.template.md`（用於新專案初始化）

#### 其他需要更新的位置
- **分析報告**：報告開頭必須包含版本信息
- **Frida 腳本註釋**：腳本註釋中記錄適用的版本
- **測試腳本**：測試腳本註釋中記錄版本

## App 更新改版處理流程

### 當 App 更新改版時，必須執行以下步驟：

1. **更新版本信息文件**
   - [ ] 更新 `config/VERSION_INFO.md` 中的版本號
   - [ ] 記錄更新日期
   - [ ] 記錄版本變更說明（如知道）

2. **檢查版本兼容性**
   - [ ] 檢查現有 Frida 腳本是否仍適用
   - [ ] 檢查函數名稱、類別名稱是否變更
   - [ ] 檢查 Native 函數地址是否變更
   - [ ] 檢查 API 接口是否變更

3. **更新相關文檔**
   - [ ] 在新分析報告中標註新版本號
   - [ ] 更新腳本註釋中的版本信息
   - [ ] 如有重大變更，記錄版本差異

4. **驗證分析結果**
   - [ ] 重新驗證關鍵函數是否仍然存在
   - [ ] 重新驗證 Hook 點是否仍然有效
   - [ ] 如有變更，更新分析結果

## 版本信息格式

### 在分析報告中
```markdown
> **分析日期**: YYYY-MM-DD  
> **App 名稱**: DBS Digibank  
> **包名 (Package Name)**: com.dbs.sg.dbsmbanking  
> **App 版本 (App Version)**: X.Y.Z  
> **啟動 Activity**: com.dbs.sg.digibank.ui.demo.SplashActivity  
> **分析工具**: {工具列表}
```

### 在 Frida 腳本中
```javascript
/**
 * {腳本名稱}
 * 
 * App 版本: X.Y.Z
 * 適用版本: X.Y.Z+
 * 日期: YYYY-MM-DD
 */
```

## 版本變更檢查清單

### 開始分析新版本前
- [ ] 確認新版本號
- [ ] 更新 `config/VERSION_INFO.md`
- [ ] 備份舊版本的分析結果（如需要）

### 分析過程中
- [ ] 記錄發現的變更點
- [ ] 驗證舊腳本是否仍適用
- [ ] 如有變更，更新腳本和文檔

### 分析完成後
- [ ] 確認所有文檔已更新版本信息
- [ ] 確認所有腳本已標註適用版本
- [ ] 如有重大變更，記錄版本差異文檔

## 版本兼容性標註

### 腳本兼容性標註
- **適用版本**: 明確標註腳本適用的版本範圍
- **測試版本**: 標註已測試的版本
- **已知問題**: 標註特定版本的問題

### 範例
```javascript
/**
 * 適用版本: 25.8.3 - 25.10.1
 * 測試版本: 25.8.3, 25.10.1
 * 已知問題: 25.9.0 版本中函數名稱變更，需更新
 */
```

## 重要提醒

1. **版本信息必須準確**：錯誤的版本信息會導致分析結果無效
2. **及時更新**：App 更新後應立即更新版本信息
3. **記錄變更**：重大版本變更應記錄差異，便於後續參考
4. **驗證兼容性**：新版本應驗證現有腳本和方法的兼容性
